import { r as __toESM } from "./chunk-DUEDWNxO.js";
import { t as require_react } from "./react-x9Y-BYRK.js";
import { t as require_jsx_runtime } from "./jsx-runtime-CQf3Gven.js";
import { c as require_classnames, o as useBootstrapPrefix, s as useIsRTL } from "./ThemeProvider-DKTT7lwV.js";
import { E as useMergedRefs_default, M as addEventListener_default, N as canUseDOM_default, S as useEventCallback, V as ownerDocument, _ as Fade_default, i as getSharedManager, j as removeEventListener_default, k as transitionEnd, n as ModalContext_default, o as Modal_default, t as AbstractModalHeader_default, x as divWithClassName_default } from "./AbstractModalHeader-Bsf6UFHL.js";

//#region node_modules/@restart/hooks/esm/useUpdatedRef.js
var import_react = require_react();
/**
* Returns a ref that is immediately updated with the new value
*
* @param value The Ref value
* @category refs
*/
function useUpdatedRef(value) {
	const valueRef = (0, import_react.useRef)(value);
	valueRef.current = value;
	return valueRef;
}

//#endregion
//#region node_modules/@restart/hooks/esm/useWillUnmount.js
/**
* Attach a callback that fires when a component unmounts
*
* @param fn Handler to run when the component unmounts
* @category effects
*/
function useWillUnmount(fn) {
	const onUnmount = useUpdatedRef(fn);
	(0, import_react.useEffect)(() => () => onUnmount.current(), []);
}

//#endregion
//#region node_modules/dom-helpers/esm/scrollbarSize.js
var size;
function scrollbarSize(recalc) {
	if (!size && size !== 0 || recalc) {
		if (canUseDOM_default) {
			var scrollDiv = document.createElement("div");
			scrollDiv.style.position = "absolute";
			scrollDiv.style.top = "-9999px";
			scrollDiv.style.width = "50px";
			scrollDiv.style.height = "50px";
			scrollDiv.style.overflow = "scroll";
			document.body.appendChild(scrollDiv);
			size = scrollDiv.offsetWidth - scrollDiv.clientWidth;
			document.body.removeChild(scrollDiv);
		}
	}
	return size;
}

//#endregion
//#region node_modules/@restart/hooks/esm/useCallbackRef.js
/**
* A convenience hook around `useState` designed to be paired with
* the component [callback ref](https://reactjs.org/docs/refs-and-the-dom.html#callback-refs) api.
* Callback refs are useful over `useRef()` when you need to respond to the ref being set
* instead of lazily accessing it in an effect.
*
* ```ts
* const [element, attachRef] = useCallbackRef<HTMLDivElement>()
*
* useEffect(() => {
*   if (!element) return
*
*   const calendar = new FullCalendar.Calendar(element)
*
*   return () => {
*     calendar.destroy()
*   }
* }, [element])
*
* return <div ref={attachRef} />
* ```
*
* @category refs
*/
function useCallbackRef() {
	return (0, import_react.useState)(null);
}

//#endregion
//#region node_modules/react-bootstrap/esm/ModalBody.js
var import_classnames$5 = /* @__PURE__ */ __toESM(require_classnames());
var import_jsx_runtime = require_jsx_runtime();
var ModalBody = /* @__PURE__ */ import_react.forwardRef(({ className, bsPrefix, as: Component = "div", ...props }, ref) => {
	bsPrefix = useBootstrapPrefix(bsPrefix, "modal-body");
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Component, {
		ref,
		className: (0, import_classnames$5.default)(className, bsPrefix),
		...props
	});
});
ModalBody.displayName = "ModalBody";
var ModalBody_default = ModalBody;

//#endregion
//#region node_modules/react-bootstrap/esm/ModalDialog.js
var import_classnames$4 = /* @__PURE__ */ __toESM(require_classnames());
var ModalDialog = /* @__PURE__ */ import_react.forwardRef(({ bsPrefix, className, contentClassName, centered, size: size$1, fullscreen, children, scrollable, ...props }, ref) => {
	bsPrefix = useBootstrapPrefix(bsPrefix, "modal");
	const dialogClass = `${bsPrefix}-dialog`;
	const fullScreenClass = typeof fullscreen === "string" ? `${bsPrefix}-fullscreen-${fullscreen}` : `${bsPrefix}-fullscreen`;
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
		...props,
		ref,
		className: (0, import_classnames$4.default)(dialogClass, className, size$1 && `${bsPrefix}-${size$1}`, centered && `${dialogClass}-centered`, scrollable && `${dialogClass}-scrollable`, fullscreen && fullScreenClass),
		children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
			className: (0, import_classnames$4.default)(`${bsPrefix}-content`, contentClassName),
			children
		})
	});
});
ModalDialog.displayName = "ModalDialog";
var ModalDialog_default = ModalDialog;

//#endregion
//#region node_modules/react-bootstrap/esm/ModalFooter.js
var import_classnames$3 = /* @__PURE__ */ __toESM(require_classnames());
var ModalFooter = /* @__PURE__ */ import_react.forwardRef(({ className, bsPrefix, as: Component = "div", ...props }, ref) => {
	bsPrefix = useBootstrapPrefix(bsPrefix, "modal-footer");
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Component, {
		ref,
		className: (0, import_classnames$3.default)(className, bsPrefix),
		...props
	});
});
ModalFooter.displayName = "ModalFooter";
var ModalFooter_default = ModalFooter;

//#endregion
//#region node_modules/react-bootstrap/esm/ModalHeader.js
var import_classnames$2 = /* @__PURE__ */ __toESM(require_classnames());
var ModalHeader = /* @__PURE__ */ import_react.forwardRef(({ bsPrefix, className, closeLabel = "Close", closeButton = false, ...props }, ref) => {
	bsPrefix = useBootstrapPrefix(bsPrefix, "modal-header");
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(AbstractModalHeader_default, {
		ref,
		...props,
		className: (0, import_classnames$2.default)(className, bsPrefix),
		closeLabel,
		closeButton
	});
});
ModalHeader.displayName = "ModalHeader";
var ModalHeader_default = ModalHeader;

//#endregion
//#region node_modules/react-bootstrap/esm/ModalTitle.js
var import_classnames$1 = /* @__PURE__ */ __toESM(require_classnames());
var DivStyledAsH4 = divWithClassName_default("h4");
var ModalTitle = /* @__PURE__ */ import_react.forwardRef(({ className, bsPrefix, as: Component = DivStyledAsH4, ...props }, ref) => {
	bsPrefix = useBootstrapPrefix(bsPrefix, "modal-title");
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Component, {
		ref,
		className: (0, import_classnames$1.default)(className, bsPrefix),
		...props
	});
});
ModalTitle.displayName = "ModalTitle";
var ModalTitle_default = ModalTitle;

//#endregion
//#region node_modules/react-bootstrap/esm/Modal.js
var import_classnames = /* @__PURE__ */ __toESM(require_classnames());
function DialogTransition(props) {
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Fade_default, {
		...props,
		timeout: null
	});
}
function BackdropTransition(props) {
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Fade_default, {
		...props,
		timeout: null
	});
}
var Modal = /* @__PURE__ */ import_react.forwardRef(({ bsPrefix, className, style, dialogClassName, contentClassName, children, dialogAs: Dialog = ModalDialog_default, "data-bs-theme": dataBsTheme, "aria-labelledby": ariaLabelledby, "aria-describedby": ariaDescribedby, "aria-label": ariaLabel, show = false, animation = true, backdrop = true, keyboard = true, onEscapeKeyDown, onShow, onHide, container, autoFocus = true, enforceFocus = true, restoreFocus = true, restoreFocusOptions, onEntered, onExit, onExiting, onEnter, onEntering, onExited, backdropClassName, manager: propsManager, ...props }, ref) => {
	const [modalStyle, setStyle] = (0, import_react.useState)({});
	const [animateStaticModal, setAnimateStaticModal] = (0, import_react.useState)(false);
	const waitingForMouseUpRef = (0, import_react.useRef)(false);
	const ignoreBackdropClickRef = (0, import_react.useRef)(false);
	const removeStaticModalAnimationRef = (0, import_react.useRef)(null);
	const [modal, setModalRef] = useCallbackRef();
	const mergedRef = useMergedRefs_default(ref, setModalRef);
	const handleHide = useEventCallback(onHide);
	const isRTL = useIsRTL();
	bsPrefix = useBootstrapPrefix(bsPrefix, "modal");
	const modalContext = (0, import_react.useMemo)(() => ({ onHide: handleHide }), [handleHide]);
	function getModalManager() {
		if (propsManager) return propsManager;
		return getSharedManager({ isRTL });
	}
	function updateDialogStyle(node) {
		if (!canUseDOM_default) return;
		const containerIsOverflowing = getModalManager().getScrollbarWidth() > 0;
		const modalIsOverflowing = node.scrollHeight > ownerDocument(node).documentElement.clientHeight;
		setStyle({
			paddingRight: containerIsOverflowing && !modalIsOverflowing ? scrollbarSize() : void 0,
			paddingLeft: !containerIsOverflowing && modalIsOverflowing ? scrollbarSize() : void 0
		});
	}
	const handleWindowResize = useEventCallback(() => {
		if (modal) updateDialogStyle(modal.dialog);
	});
	useWillUnmount(() => {
		removeEventListener_default(window, "resize", handleWindowResize);
		removeStaticModalAnimationRef.current == null || removeStaticModalAnimationRef.current();
	});
	const handleDialogMouseDown = () => {
		waitingForMouseUpRef.current = true;
	};
	const handleMouseUp = (e) => {
		if (waitingForMouseUpRef.current && modal && e.target === modal.dialog) ignoreBackdropClickRef.current = true;
		waitingForMouseUpRef.current = false;
	};
	const handleStaticModalAnimation = () => {
		setAnimateStaticModal(true);
		removeStaticModalAnimationRef.current = transitionEnd(modal.dialog, () => {
			setAnimateStaticModal(false);
		});
	};
	const handleStaticBackdropClick = (e) => {
		if (e.target !== e.currentTarget) return;
		handleStaticModalAnimation();
	};
	const handleClick = (e) => {
		if (backdrop === "static") {
			handleStaticBackdropClick(e);
			return;
		}
		if (ignoreBackdropClickRef.current || e.target !== e.currentTarget) {
			ignoreBackdropClickRef.current = false;
			return;
		}
		onHide?.();
	};
	const handleEscapeKeyDown = (e) => {
		if (keyboard) onEscapeKeyDown?.(e);
		else {
			e.preventDefault();
			if (backdrop === "static") handleStaticModalAnimation();
		}
	};
	const handleEnter = (node, isAppearing) => {
		if (node) updateDialogStyle(node);
		onEnter?.(node, isAppearing);
	};
	const handleExit = (node) => {
		removeStaticModalAnimationRef.current == null || removeStaticModalAnimationRef.current();
		onExit?.(node);
	};
	const handleEntering = (node, isAppearing) => {
		onEntering?.(node, isAppearing);
		addEventListener_default(window, "resize", handleWindowResize);
	};
	const handleExited = (node) => {
		if (node) node.style.display = "";
		onExited?.(node);
		removeEventListener_default(window, "resize", handleWindowResize);
	};
	const renderBackdrop = (0, import_react.useCallback)((backdropProps) => /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
		...backdropProps,
		className: (0, import_classnames.default)(`${bsPrefix}-backdrop`, backdropClassName, !animation && "show")
	}), [
		animation,
		backdropClassName,
		bsPrefix
	]);
	const baseModalStyle = {
		...style,
		...modalStyle
	};
	baseModalStyle.display = "block";
	const renderDialog = (dialogProps) => /* @__PURE__ */ (0, import_jsx_runtime.jsx)("div", {
		role: "dialog",
		...dialogProps,
		style: baseModalStyle,
		className: (0, import_classnames.default)(className, bsPrefix, animateStaticModal && `${bsPrefix}-static`, !animation && "show"),
		onClick: backdrop ? handleClick : void 0,
		onMouseUp: handleMouseUp,
		"data-bs-theme": dataBsTheme,
		"aria-label": ariaLabel,
		"aria-labelledby": ariaLabelledby,
		"aria-describedby": ariaDescribedby,
		children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Dialog, {
			...props,
			onMouseDown: handleDialogMouseDown,
			className: dialogClassName,
			contentClassName,
			children
		})
	});
	return /* @__PURE__ */ (0, import_jsx_runtime.jsx)(ModalContext_default.Provider, {
		value: modalContext,
		children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(Modal_default, {
			show,
			ref: mergedRef,
			backdrop,
			container,
			keyboard: true,
			autoFocus,
			enforceFocus,
			restoreFocus,
			restoreFocusOptions,
			onEscapeKeyDown: handleEscapeKeyDown,
			onShow,
			onHide,
			onEnter: handleEnter,
			onEntering: handleEntering,
			onEntered,
			onExit: handleExit,
			onExiting,
			onExited: handleExited,
			manager: getModalManager(),
			transition: animation ? DialogTransition : void 0,
			backdropTransition: animation ? BackdropTransition : void 0,
			renderBackdrop,
			renderDialog
		})
	});
});
Modal.displayName = "Modal";
var Modal_default$1 = Object.assign(Modal, {
	Body: ModalBody_default,
	Header: ModalHeader_default,
	Title: ModalTitle_default,
	Footer: ModalFooter_default,
	Dialog: ModalDialog_default,
	TRANSITION_DURATION: 300,
	BACKDROP_TRANSITION_DURATION: 150
});

//#endregion
export { ModalDialog_default as a, ModalFooter_default as i, ModalTitle_default as n, ModalBody_default as o, ModalHeader_default as r, useWillUnmount as s, Modal_default$1 as t };
//# sourceMappingURL=Modal-DArjs44Y.js.map